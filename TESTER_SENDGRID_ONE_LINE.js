// VERSION UNE SEULE LIGNE - Copiez-collez TOUT dans la console (F12)
(async function(){const API_BASE=window.API_BASE_URL||"https://ctp67u5hgni2rbfr3kp4p74kxa0gxycf.lambda-url.eu-west-1.on.aws/api";const testEmail=prompt("Entrez votre adresse email pour le test:");if(!testEmail){console.log("âŒ Test annulÃ©");return;}console.log("ğŸ“§ Envoi d'un code de vÃ©rification Ã : "+testEmail);try{const response=await fetch(API_BASE+"/user/send-verification-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:testEmail,username:"Test User"})});if(response.ok){const data=await response.json();console.log("âœ… RÃ©ponse:",data);if(data.dev_mode===true||(data.message&&data.message.indexOf("mode dÃ©veloppement")!==-1)){console.log("âš ï¸ MODE DÃ‰VELOPPEMENT - Email NON envoyÃ©");console.log("SENDGRID_API_KEY probablement non configurÃ©e");}else{console.log("âœ… EMAIL ENVOYÃ‰!");}if(data.code){console.log("ğŸ” CODE DEV: "+data.code);alert("CODE DEV: "+data.code);}}else{const error=await response.json().catch(()=>({error:await response.text()}));console.error("âŒ Erreur:",error);alert("âŒ Erreur: "+(error.error||error.message||"Erreur inconnue"));}}catch(error){console.error("âŒ Exception:",error);alert("âŒ Erreur: "+error.message);}})();
